{% extends "base.html" %}
{% load i18n %}

{% block content %}
<p>
	
	<input type="button" name="rand" value="Get message from server!" id="rand" onclick="Dajaxice.giftreg.dajaxice_example('my_callback')">
	
	<table class="partbox" cellspacing="0" cellpadding="2">
		<tr class="partboxtitle">
			<td colspan="4" align="center">Ranks</td>
		</tr>
		<tr>
			<th class="colheader">Title</th>
			<th class="colheader">Rendered HTML</th>
			<th class="colheader">Rank Order</th>
		</tr>
		{% for rank in ranks %}
			<tr class="{% cycle 'evenrow' 'oddrow' %}">
				<td>{{ rank.title }}</td>
				<td>{{ rank.rendered }}</td>
				<td>{{ rank.rankorder }}</td>
				<td align="right">
					<a href="rank/edit/{{ rank.id }}">Edit</a>
					/
					<a href="rank/delete/{{ rank.id }}">Delete</a>
					/
					<a href="rank/promote/{{ rank.id }}">Promote</a>
					/
					<a href="rank/demote/{{ rank.id }}">Demote</a>
				</td>
			</tr>
			{% endfor %}
	</table>
</p>
<p>
	<a href="rank/add">Add a new rank</a> / <a href="/">Back to main</a>
</p>
<form method="post" action="">
    <table>
	{{ formset.as_table }}
	</table>
	<input type="submit" value="Add Rank">
</form>


<!-- a place holder for the grid. requires the unique id to be passed in the javascript function, and width and height ! --> 
<div id="example-grid"></div>
	
	<script type="text/javascript" language="JavaScript">
		
function my_callback(data){
	debugger;
    if(data!='DAJAXICE_EXCEPTION'){
        alert(data.message);
    }
    else{
        alert('Error, something fails');
    }
 }		
		
		//debugger;		
		//alert('xxxxxxxxxxxxxxxxxxx');

		var ranksJson = {{rankData|safe}};
		
//var proxy=new Ext.data.HttpProxy(    {url:'survey.html'});
	

/*
var reader=new Ext.data.JsonReader(
			{
			},[
				{name: 'appeId', mapping: 'appeId'},
				{name: 'survId'},            
				{name: 'location'}, 
				{name: 'surveyDate'},
				{name: 'surveyTime'},
				{name: 'inputUserId'}           
			]
		)
*/
	  
/*
		var store=new Ext.data.Store(    {
		  proxy:proxy,
		  reader:reader
	   });
*/

/*
var tstReader = new Ext.data.JsonReader();

	var testStore = new Ext.data.DirectStore({
    data : ranksJson,
	fields: [
       {name: 'ranking', type: 'int'},
       'title',
       'rendered',
       {name: 'rankorder', type: 'int'}
    ],
	reader : tstReader
	});
*/
   
	/*
try
	{
		//testStore.load(ranksJson);
		testStore.load()
	}
	catch(err)
	{
		alert(err.message);
	}
*/


    // create the grid
    /*
var grid = new Ext.grid.GridPanel({
        store: testStore,
        columns: [
            {header: "ranking", width: 60, dataIndex: 'ranking', sortable: true},
            {header: "title", width: 60, dataIndex: 'title', sortable: true},
            {header: "rendered", width: 60, dataIndex: 'rendered', sortable: true},
            {header: "rankorder", width: 100, dataIndex: 'rankorder', sortable: true}
        ],
        renderTo:'example-grid',
        width:540,
        height:200
    });
*/
		
		
	</script>
	
	
{% endblock %}
